<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Car Selection</title>
    <link rel="stylesheet" href="./calcul.css">
</head>

<body>
    <section class="formsAll">
    <form id="carForm" class="form">
        <label for="carBrand"></label>
        <select id="carBrand" class="form__select">
            <option value="" disabled selected>Выберите марку</option>
            <option value="Renault">Renault</option>
            <option value="Opel">Opel</option>
            <option value="Mazda">Mazda</option>
            <option value="Jaguar">Jaguar</option>
        </select>

        <label for="carModel"></label>
        <select id="carModel" class="form__select">
            <option value="" disabled selected>Выберите модель</option>
        </select>

        <fieldset>
            <legend>Тип топлива:</legend>
            <label><input type="radio" name="carFuel" value="gasoline"> Бензин</label>
            <label><input type="radio" name="carFuel" value="diesel"> Дизель</label>
            <label><input type="radio" name="carFuel" value="electric"> Электро</label>
        </fieldset>

        <label for="volume">Объем двигателя (л):</label>
        <input type="number" id="volume" class="form__input" step="0.1" min="0.8" max="5.0">

        <fieldset>
            <legend>Состояние автомобиля:</legend>
            <label><input type="radio" name="carCondition" value="new"> Новый</label>
            <label><input type="radio" name="carCondition" value="used"> Б/у</label>
        </fieldset>

        <fieldset>
            <legend>Владелец:</legend>
            <label><input type="radio" name="carOwner" value="first"> Первый</label>
            <label><input type="radio" name="carOwner" value="second"> Второй</label>
        </fieldset>

        <fieldset>
            <legend>Способ оплаты:</legend>
            <label><input type="radio" name="carPay" value="cash"> Наличные</label>
            <label><input type="radio" name="carPay" value="card"> Карта</label>
        </fieldset>

        <button type="button" id="submit">Рассчитать цену</button>
    </form>

    <p>Цена автомобиля: <span id="price">0</span> руб.</p>
</section>

    <script>
        // Вставка твоего JavaScript-кода здесь
        const carModels = {
            Renault: ['Logan', 'Sandero', 'Kaptur', 'Duster'],
            Opel: ['Astra', 'Corsa', 'Vectra', 'Mokka'],
            Mazda: ['CX-5', '3', '6', 'CX-9'],
            Jaguar: ['F-Pace', 'XFR', 'XF', 'XJ'],
        };

        function updateModels() {
            const selectedMake = document.getElementById('carBrand').value;
            const carModelSelect = document.getElementById('carModel');

            carModelSelect.innerHTML = ''; // Очищаем текущие модели

            carModels[selectedMake].forEach((model) => {
                const option = document.createElement('option');
                option.value = model;
                option.text = model;
                carModelSelect.appendChild(option);
            });
        }

        const carBrand = document.getElementById('carBrand');
        carBrand.addEventListener('change', updateModels);

        const carModel = document.getElementById('carModel');
        const carFuel = document.querySelectorAll("input[name='carFuel']");
        const carCondition = document.querySelectorAll("input[name='carCondition']");
        const carOwner = document.querySelectorAll("input[name='carOwner']");
        const carPay = document.querySelectorAll("input[name='carPay']");
        const volume = document.getElementById('volume');
        const priceCar = document.getElementById('price');
        const submit = document.getElementById('submit');

        const calculatePrice = (event) => {
            event.preventDefault(); // Предотвращаем отправку формы

            const selectedBrand = carBrand.value;
            const selectedModel = carModel.value;
            const selectedFuel = [...carFuel].find((item) => item.checked)?.value;
            const selectedVolume = volume.value;
            const selectedCondition = [...carCondition].find(
                (item) => item.checked
            )?.value;
            const selectedOwner = [...carOwner].find((item) => item.checked)?.value;
            const selectedPay = [...carPay].find((item) => item.checked)?.value;

            let basePrice = 200000;
            let totalPrice = basePrice;

            if (selectedBrand === 'Renault') {
                totalPrice += 50000;
            } else if (selectedBrand === 'Opel') {
                totalPrice += 100000;
            } else if (selectedBrand === 'Mazda') {
                totalPrice += 300000;
            } else if (selectedBrand === 'Jaguar') {
                totalPrice += 200000;
            }

            if (
                selectedModel === 'Logan' ||
                selectedModel === 'Vectra' ||
                selectedModel === '3' ||
                selectedModel === 'XF'
            ) {
                totalPrice += 50000;
            } else if (
                selectedModel === 'Sandero' ||
                selectedModel === 'Corsa' ||
                selectedModel === '6' ||
                selectedModel === 'XFR'
            ) {
                totalPrice += 100000;
            } else if (
                selectedModel === 'Duster' ||
                selectedModel === 'Astra' ||
                selectedModel === 'CX-5' ||
                selectedModel === 'XJ'
            ) {
                totalPrice += 200000;
            } else if (
                selectedModel === 'Kaptur' ||
                selectedModel === 'Mokka' ||
                selectedModel === 'CX-9' ||
                selectedModel === 'F-Pace'
            ) {
                totalPrice += 150000;
            }

            if (selectedFuel === 'electric') {
                totalPrice += 50000;
            } else {
                totalPrice += 20000;
            }

            if (selectedVolume > 2.0) {
                totalPrice += 100000;
            } else {
                totalPrice += 50000;
            }

            if (selectedCondition === 'used') {
                totalPrice -= 30000;
            }

            if (selectedOwner === 'second') {
                totalPrice -= 20000;
            }

            if (selectedPay === 'card') {
                totalPrice += 10000;
            }

            priceCar.textContent = totalPrice;
        };

        submit.addEventListener('click', calculatePrice);

        const elements = [
            carBrand,
            carModel,
            ...carFuel,
            volume,
            ...carCondition,
            ...carOwner,
            ...carPay,
        ];

        elements.forEach((element) => {
            element.addEventListener('change', calculatePrice);
        });

        const inputFields = document.querySelectorAll('.form__input, .form__select');

        inputFields.forEach(function (input) {
            input.addEventListener('focus', function () {
                input.style.border = '1px solid rgb(141, 245, 120)';
                input.style.backgroundColor = 'rgb(141, 245, 120)';
            });

            input.addEventListener('blur', function () {
                input.style.border = '';
                input.style.backgroundColor = '';
            });
        });
    </script>
</body>

</html>